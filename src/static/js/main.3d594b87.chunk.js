(this["webpackJsonpchess-app"]=this["webpackJsonpchess-app"]||[]).push([[0],[,,,,,function(e,t,r){e.exports=r.p+"static/media/Kw.250510ff.svg"},function(e,t,r){e.exports=r.p+"static/media/Kb.66e1bcad.svg"},function(e,t,r){e.exports=r.p+"static/media/Qw.4320a2dd.svg"},function(e,t,r){e.exports=r.p+"static/media/Qb.7b3e33e4.svg"},function(e,t,r){e.exports=r.p+"static/media/Rw.095b1a06.svg"},function(e,t,r){e.exports=r.p+"static/media/Rb.96872a66.svg"},function(e,t,r){e.exports=r.p+"static/media/Bw.09004fd2.svg"},function(e,t,r){e.exports=r.p+"static/media/Bb.1f3b8d1a.svg"},function(e,t,r){e.exports=r.p+"static/media/Nw.e6294efe.svg"},function(e,t,r){e.exports=r.p+"static/media/Nb.d39f1d02.svg"},function(e,t,r){e.exports=r.p+"static/media/pw.d69014fb.svg"},function(e,t,r){e.exports=r.p+"static/media/pb.1c52d8c4.svg"},,function(e,t,r){e.exports=r(28)},,,,,function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){"use strict";r.r(t);var n=r(2),a=r(1),i=r(0),o=r.n(i),c=r(4),s=r.n(c),u=(r(23),r(24),r(25),r(26),r(5)),l=r.n(u),d=r(6),p=r.n(d),f=r(7),b=r.n(f),g=r(8),y=r.n(g),w=r(9),h=r.n(w),v=r(10),Y=r.n(v),O=r(11),m=r.n(O),X=r(12),j=r.n(X),x=r(13),z=r.n(x),P=r(14),M=r.n(P),E=r(15),S=r.n(E),k=r(16),q=r.n(k);function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var R=function(e){return""===e.piece?null:o.a.createElement("img",{className:"piece",alt:"Error",src:B[e.piece],draggable:!1,style:N({width:7.5*e.size/64,height:7.5*e.size/64},e.position?{position:"fixed",left:e.position.x-e.size/16,top:e.position.y-e.size/16,zIndex:11}:null)})},B={Kw:l.a,Kb:p.a,Qw:b.a,Qb:y.a,Rw:h.a,Rb:Y.a,Bw:m.a,Bb:j.a,Nw:z.a,Nb:M.a,pw:S.a,pb:q.a};r(27);function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Q=function(e,t){switch(t.type){case"dragging":return C({},e,{dragging:!0});case"undragging":return C({},e,{dragging:!1});case"click":return C({},e,{clicked:!e.clicked});default:return e}},I=function(e){var t=Object(i.useReducer)(Q,{clicked:!1,dragging:!1,x:null,y:null,piece:e.piece.slice(0,1),color:e.piece.slice(1,2)}),r=Object(n.a)(t,2),a=r[0],c=r[1],s=Object(i.useContext)(W);return""===e.piece?o.a.createElement("div",{className:"square",style:{top:parseInt(e.y)*e.size/8,left:parseInt(e.x)*e.size/8,backgroundColor:"white"===e.color?"burlywood":"peru",width:15*e.size/128,height:15*e.size/128,border:"".concat(e.size/128,"px solid black")},onClick:function(){return e.dispatch({type:"selected",x:e.x,y:e.y})}}):o.a.createElement("div",{className:"square",style:{top:parseInt(e.y)*e.size/8,left:parseInt(e.x)*e.size/8,backgroundColor:s.selectedSquare.x===e.x&&s.selectedSquare.y===e.y?"rgba(64, 143, 50, 0.6)":"white"===e.color?"burlywood":"peru",width:15*e.size/128,height:15*e.size/128,border:"".concat(e.size/128,"px solid black")},onMouseDown:function(){return c({type:"dragging"})},onMouseUp:function(){c({type:"undragging"}),s.hoverSquare.x===e.x&&s.hoverSquare.y===e.y?e.dispatch({type:s.selectedSquare.x===e.x&&s.selectedSquare.y===e.y?"unselected":"selected",x:e.x,y:e.y}):e.dispatch({type:"move",startX:e.x,startY:e.y,piece:e.piece})}},o.a.createElement(R,{size:e.size,piece:e.piece,position:a.dragging?{x:s.mouseX,y:s.mouseY}:null}))};function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function J(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var U=function(){var e=Object(i.useContext)($),t=Object(i.useReducer)((function(t,r){switch(r.type){case"mousemove":return J({},t,{mouseX:r.x,mouseY:r.y,hoverSquare:{x:Math.floor((r.x-e.size/128)/(e.size/8)),y:Math.floor((r.y-e.size/128)/(e.size/8))}});case"dragging":return J({},t,{dragging:!0,dragStartX:t.mouseX,dragStartY:t.mouseY,originSquare:{x:Math.floor((t.mouseX-e.size/128)/(e.size/8)),y:Math.floor((t.mouseY-e.size/128)/(e.size/8))}});case"undragging":return J({},t,{dragging:!1,endingSquare:{x:Math.floor((t.mouseX-e.size/128)/(e.size/8)),y:Math.floor((t.mouseY-e.size/128)/(e.size/8))}});case"selected":return J({},t,{selectedSquare:{x:r.x,y:r.y}});case"unselected":return J({},t,{selectedSquare:{x:null,y:null}});case"move":return e.postMove({startX:r.startX,startY:r.startY,endX:t.hoverSquare.x,endY:t.hoverSquare.y,piece:r.piece}),J({},t,{selectedSquare:{x:null,y:null}});default:return t}}),{dragging:!1,dragStartX:null,dragStartY:null,mouseX:null,mouseY:null,hoverSquare:{x:null,y:null},originSquare:{x:null,y:null},selectedSquare:{x:null,y:null}}),r=Object(n.a)(t,2),a=r[0],c=r[1];return o.a.createElement(W.Provider,{value:a},o.a.createElement("div",{style:{width:e.size,height:e.size},onMouseMove:function(e){return c({type:"mousemove",x:e.pageX,y:e.pageY})},className:"board",onMouseDown:function(){return c({type:"dragging"})},onMouseUp:function(){return c({type:"undragging"})}},e.board.map((function(t,r){return o.a.createElement("span",{className:"row",key:r},t.map((function(t,n){return o.a.createElement(I,{size:e.size,dispatch:c,key:"".concat(r," ").concat(n),x:n,y:r,piece:t,color:r%2===0?n%2===0?"white":"black":n%2===0?"black":"white"})})))}))))},W=o.a.createContext();var A=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(U,null))},F=r(17),G=function(e,t){var r=e.piece.slice(1),n=Array.from(t,(function(e){return Object(F.a)(e)}));n[e.endY][e.endX]=e.piece,n[e.startY][e.startX]="";var a=function(e,t){var r=[[!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1]],n=[];return e.forEach((function(e,r){e.forEach((function(e,a){e.slice(1)===t&&n.push({piece:e,x:a,y:r})}))})),e.forEach((function(t,a){t.forEach((function(t,i){if(!r[a][i]){var o=!0,c=!1,s=void 0;try{for(var u,l=n[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var d=u.value;if(L(d.piece,e,r,{startX:d.x,startY:d.y,endX:i,endY:a})){r[a][i]=!0;break}}}catch(p){c=!0,s=p}finally{try{o||null==l.return||l.return()}finally{if(c)throw s}}}}))})),r}(n,"w"===r?"b":"w"),i={x:null,y:null};if(t.forEach((function(e,t){e.forEach((function(e,n){e.slice(1)===r&&"K"===e.slice(0,1)&&(i.x=n,i.y=t)}))})),null===i.x||null===i.y)throw new Error("null King!");return!a[i.y][i.x]&&L(e.piece,t,a,{startX:e.startX,startY:e.startY,endX:e.endX,endY:e.endY})};function L(e,t,r,n){switch(e.slice(0,1)){case"R":if(n.startX!==n.endX||""!==t[n.endY][n.endX]&&t[n.endY][n.endX].slice(1)===e.slice(1)){if(n.startY!==n.endY||""!==t[n.endY][n.endX]&&t[n.endY][n.endX].slice(1)===e.slice(1))return!1;var a=n.startY;if(n.startX<n.endX){for(var i=n.startX+1;i<n.endX;i++)if(""!==t[a][i])return!1}else for(var o=n.startX-1;o>n.endX;o--)if(""!==t[a][o])return!1;return!0}var c=n.startX;if(n.startY<n.endY){for(var s=n.startY+1;s<n.endY;s++)if(""!==t[s][c])return!1}else for(var u=n.startY-1;u>n.endY;u--)if(""!==t[u][c])return!1;return!0;case"B":if(Math.abs(n.startX-n.endX)!==Math.abs(n.startY-n.endY)||""!==t[n.endY][n.endX]&&t[n.endY][n.endX].slice(1)===e.slice(1))return!1;if(n.startX<n.endX&&n.startY<n.endY)for(var l=n.startX+1,d=n.startY+1;d<n.endY&&l<n.endX;d++,l++)if(""!==t[d][l])return!1;if(n.startX>n.endX&&n.startY<n.endY)for(var p=n.startX-1,f=n.startY+1;f<n.endY&&p>n.endX;f++,p--)if(""!==t[f][p])return!1;if(n.startX<n.endX&&n.startY>n.endY)for(var b=n.startX+1,g=n.startY-1;g>n.endY&&b<n.endX;g--,b++)if(""!==t[g][b])return!1;if(n.startX>n.endX&&n.startY>n.endY)for(var y=n.startX-1,w=n.startY-1;w>n.endY&&y>n.endX;w--,y--)if(""!==t[w][y])return!1;return!0;case"N":return(""===t[n.endY][n.endX]||t[n.endY][n.endX].slice(1)!==e.slice(1))&&(1===Math.abs(n.startX-n.endX)&&2===Math.abs(n.startY-n.endY)||2===Math.abs(n.startX-n.endX)&&1===Math.abs(n.startY-n.endY));case"Q":return L("R"+e.slice(1),t,r,n)||L("B"+e.slice(1),t,r,n);case"K":return!(r[n.endY][n.endX]||""!==t[n.endY][n.endX]&&t[n.endY][n.endX].slice(1)===e.slice(1))&&(Math.abs(n.startX-n.endX)<=1&&Math.abs(n.startY-n.endY)<=1);case"p":if(n.startY===("w"===e.slice(1)?6:1)){if(n.endX===n.startX)return("w"===e.slice(1)?n.startY-n.endY<=2&&n.startY-n.endY>0:n.endY-n.startY<=2&&n.endY-n.startY>0)&&""===t[n.endY][n.endX]}else if(n.endX===n.startX)return("w"===e.slice(1)?n.startY-n.endY===1:n.endY-n.startY===1)&&""===t[n.endY][n.endX];return Math.abs(n.startX-n.endX)<=1&&(("w"===e.slice(1)?n.startY-n.endY===1:n.endY-n.startY===1)&&""!==t[n.endY][n.endX]&&t[n.endY][n.endX].slice(1)!==e.slice(1));default:throw new Error("Piece Error Occured: ".concat(e))}}function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Z=o.a.createContext(),$=t.default=Z,_=function(e,t){var r;switch(t.type){case"init":return V({},e,{board:r=[["Rb","Nb","Bb","Qb","Kb","Bb","Nb","Rb"],["pb","pb","pb","pb","pb","pb","pb","pb"],["","","","","","","",""],["","","","","","","",""],["","","","","","","",""],["","","","","","","",""],["pw","pw","pw","pw","pw","pw","pw","pw"],["Rw","Nw","Bw","Qw","Kw","Bw","Nw","Rw"]]});case"move":return r=e.board,e.colorMove!==t.move.piece.slice(1)&&console.log("not his move"),e.colorMove===t.move.piece.slice(1)&&G(t.move,r)?(r[t.move.endY][t.move.endX]=t.move.piece,r[t.move.startY][t.move.startX]="",V({},e,{colorMove:"w"===e.colorMove?"b":"w",board:r})):e;case"resize":return V({},e,{size:Math.floor(.993*Math.min(window.innerHeight,window.innerWidth))});case"resize-electron":return V({},e,{size:Math.floor(.97*Math.min(t.width,t.height))});default:return e}};s.a.render(o.a.createElement((function(e){var t=Object(i.useReducer)(_,{board:[],size:Math.floor(.993*Math.min(window.innerHeight,window.innerWidth)),colorMove:"w",postMove:function(e){c({type:"move",move:e})}}),r=Object(n.a)(t,2),a=r[0],c=r[1];return Object(i.useEffect)((function(){c({type:"init"}),window.resize=function(e){var t=Object(n.a)(e,2),r=t[0],a=t[1];c({type:"resize-electron",width:r,height:a})},window.onresize=function(){c({type:"resize"})}}),[]),o.a.createElement(Z.Provider,{value:a},e.children)}),null,o.a.createElement(A,null)),document.getElementById("root"))}],[[18,1,2]]]);
//# sourceMappingURL=main.3d594b87.chunk.js.map